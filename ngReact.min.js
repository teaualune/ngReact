(function(n,t){"undefined"!=typeof module&&module.exports?module.exports=t(require("react"),require("angular")):"function"==typeof define&&define.amd?define(["react","angular"],function(e,angular){return n.ngReact=t(e,angular)}):n.ngReact=t(n.React,n.angular)})(this,function(React,angular){"use strict";function n(n,t){if(angular.isFunction(n))return n;if(!n)throw Error("ReactComponent name attribute must be specified");var e;try{e=t.get(n)}catch(r){}if(!e)try{e=n.split(".").reduce(function(n,t){return n[t]},window)}catch(r){}if(!e)throw Error("Cannot find react component "+n);return e}function t(n,t){if(n.wrappedInApply)return n;var e=function(){var e=arguments;return t.$apply(function(){return n.apply(null,e)})};return e.wrappedInApply=!0,e}function e(n,e){return Object.keys(n||{}).reduce(function(r,o){var c=n[o];return r[o]=angular.isFunction(c)?t(c,e):c,r},{})}function r(n,t,e,r){var o=[];return"collection"===n&&angular.isFunction(t.$watchCollection)?e.forEach(function(n){o.push(t.$watchCollection(n,r))}):"reference"===n?angular.isFunction(t.$watchGroup)?o.push(t.$watchGroup(e,r)):e.forEach(function(n){o.push(t.$watch(n,r))}):e.forEach(function(n){o.push(t.$watch(n,r,!0))}),function(){angular.forEach(o,function(n){n()})}}function o(n,t,e,r,o){e.when(n).then(function(n){r(function(){React.render(React.createElement(n,t),o[0])})},function(){throw Error("Could not resolve component promise")})}var c=function(t,c,u){return{restrict:"E",replace:!0,link:function(i,a,f){var p=n(f.name,u),s=function(){var n=i.$eval(f.props),r=e(n,i);o(p,r,t,c,a)},l=f.props?r(f.watchDepth,i,[f.props],s):s(),h=i.$on("$destroy",function(){React.unmountComponentAtNode(a[0]),angular.isFunction(l)&&l(),h()})}}},u=function(t,c,u){return function(i,a,f){var p={restrict:"E",replace:!0,link:function(f,p,s){var l=n(i,u);a=a||Object.keys(l.propTypes||{});var h=function(){var n={};a.forEach(function(t){n[t]=f.$eval(s[t])}),o(l,e(n,f),t,c,p)},d=a.map(function(n){return s[n]}),m=r(s.watchDepth,f,d,h);h();var $=f.$on("$destroy",function(){React.unmountComponentAtNode(p[0]),m(),$()})}};return angular.extend(p,f)}};return angular.module("react",[]).directive("reactComponent",["$q","$timeout","$injector",c]).factory("reactDirective",["$q","$timeout","$injector",u])});